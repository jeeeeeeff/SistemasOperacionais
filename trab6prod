#include "defs.h"
sems *las;

int main(int argc, char *argv[])
{
    alarm(200);
    printf("%s\n", argv[1]);
    int idM = atoi(argv[1]);
    las = shmat(idM, 0, 0);
    while(1)
    {
        sleep(rand() % 15);

        int random = rand() % 50;
        sem_wait(&(las->empty));
        pthread_mutex_lock(&(las->prod));

        if(!insert_item(las, random))
            printf("Inserido item: %d\n", random);
        else
            fprintf(stderr, "Produtor em condição de erro: Algo deu ruim\n");

        pthread_mutex_unlock(&(las->prod));
        sem_post(&(las->full));
    }
}
